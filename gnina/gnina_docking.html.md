# gnina docking


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Setup

## Setup gnina

Below are the commands to setup

``` python
# !sudo apt install -yq openbabel
# !wget https://github.com/gnina/gnina/releases/download/v1.0.3/gnina #check the latest version please
# !chmod +x gnina
# !./gnina
```

Alternatively, use python script to setup:

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/kdock/blob/main/kdock/gnina/dock.py#L18"
target="_blank" style="float:right; font-size:smaller">source</a>

### setup_gnina_local

>  setup_gnina_local (version='v1.3')

*Download and install gnina in the current directory*

``` python
# setup_gnina_local('v1.1')
```

``` python
def delete_gnina(gnina_path="gnina"):
    "Remove gnina after finish"
    path=Path(gnina_path)
    if path.exists() and path.is_file():
        path.unlink()
        print('Deleted!')
    else: print('Not exist!')
```

``` python
# delete_gnina()
```

    Deleted!

If local is not successful, use docker

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/kdock/blob/main/kdock/gnina/dock.py#L39"
target="_blank" style="float:right; font-size:smaller">source</a>

### setup_gnina_docker

>  setup_gnina_docker ()

*Pull gnina docker image*

``` python
# setup_gnina_docker()
```

    Pulling GNINA Docker image: gnina/gnina
    GNINA Docker image is ready.

## Get protein and ligand

``` python
# #nature medicine paper, mrtx
# !wget http://files.rcsb.org/download/7T47.pdb

# # get ligand
# !grep 6IC 7T47.pdb > lig.pdb

# # get protein
# # !grep ATOM 7T47.pdb > rec.pdb #not as good as the one below

# !grep -v 6IC 7T47.pdb > rec.pdb
```

## Gnina affinity

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/kdock/blob/main/kdock/gnina/dock.py#L46"
target="_blank" style="float:right; font-size:smaller">source</a>

### extract_gnina_dock

>  extract_gnina_dock (gnina_output)

*Extract values from gnina output*

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/kdock/blob/main/kdock/gnina/dock.py#L89"
target="_blank" style="float:right; font-size:smaller">source</a>

### gnina_dock

>  gnina_dock (receptor, ligand, autobox_ligand, output='docked.sdf',
>                  seed=0, exhaustiveness=None)

<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 25%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>receptor</td>
<td></td>
<td></td>
<td>receptor file</td>
</tr>
<tr>
<td>ligand</td>
<td></td>
<td></td>
<td>ligand file</td>
</tr>
<tr>
<td>autobox_ligand</td>
<td></td>
<td></td>
<td>ligand file isolated from the complex</td>
</tr>
<tr>
<td>output</td>
<td>str</td>
<td>docked.sdf</td>
<td>output file (sdf or sdf.gz) to be saved</td>
</tr>
<tr>
<td>seed</td>
<td>int</td>
<td>0</td>
<td>set seeds</td>
</tr>
<tr>
<td>exhaustiveness</td>
<td>NoneType</td>
<td>None</td>
<td>number of MC chains, default is 8 if None, the higher the better
(16,32); for whole protein, use 64</td>
</tr>
</tbody>
</table>

``` python
# df = Data.get_g12d_dedup()[:10]
```

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/kdock/blob/main/kdock/gnina/dock.py#L89"
target="_blank" style="float:right; font-size:smaller">source</a>

### gnina_dock

>  gnina_dock (df, ID_col='ID', smi_col='SMILES', output_dir='gnina_docked')

``` python
# out = gnina_dock_df(df)
```

TODO: make it parallel

## End
